#!/usr/bin/env bash
set -e
# Top-level directory for this product
TOPDIR=$(cd `dirname $(readlink "$0" || echo "$0")`/.. ; pwd -P)
source $TOPDIR/bin/sparkling-env.sh
# Verify there is Spark installation
checkSparkHome

# Default memory for shell
SHELL_DRIVER_MEMORY=3G
# Default MASTER
MASTER=${MASTER:-"local-cluster[3,2,2048]"}
export MASTER

cat <<EOF

Using 
  MASTER     = $MASTER"
  SPARK_HOME = $SPARK_HOME"

EOF

(
 cd $TOPDIR
 $SPARK_HOME/bin/spark-shell --jars $TOPDIR/assembly/build/libs/$FAT_JAR --driver-memory $SHELL_DRIVER_MEMORY "$@"
)
