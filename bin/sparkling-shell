#!/usr/bin/env bash

# Top-level directory for this product
TOPDIR=$(cd `dirname $0`/..; pwd)
source $TOPDIR/bin/sparkling-env.sh

SHELL_DRIVER_MEMORY=3G
FAT_JAR="sparkling-water-examples-$VERSION-all.jar"

if [ ! -d "$SPARK_HOME" ]; then
  echo "Please setup SPARK_HOME variable to your Spark installation!"
  exit -1
fi

# Default MASTER
MASTER=${MASTER:-"local-cluster[3,2,2048]"}
export MASTER

cat <<EOF

Using 
  MASTER     = $MASTER"
  SPARK_HOME = $SPARK_HOME"

EOF

(
 cd $TOPDIR
 $SPARK_HOME/bin/spark-shell --jars $TOPDIR/examples/build/libs/$FAT_JAR --driver-memory $SHELL_DRIVER_MEMORY "$@"
)
